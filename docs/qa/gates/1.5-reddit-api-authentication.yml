schema: 1
story: '1.5'
story_title: 'Reddit API Authentication'
gate: CONCERNS
status_reason: 'API crashes on missing Reddit env vars (no disabled mode), approval workflow is unimplemented (writes throw), and no Reddit client tests are present despite claims.'
reviewer: 'Quinn (Test Architect)'
updated: '2025-12-04T00:35:00Z'

top_issues:
  - severity: high
    description: 'Module-level credential validation crashes the backend when Reddit env vars are absent; no safe disablement.'
    suggested_action: 'Guard client construction and allow REDDIT_ENABLED=false to skip wiring without throwing.'
    suggested_owner: dev
  - severity: medium
    description: 'Approval workflow is not implemented; reply/comment paths throw when REQUIRE_APPROVAL is true.'
    suggested_action: 'Implement approval flow or configurable bypass before enabling writes.'
    suggested_owner: dev
  - severity: medium
    description: 'No automated tests for Reddit client/monitor/routes in this repo.'
    suggested_action: 'Add unit/integration tests for search/reply and /api/reddit endpoints.'
    suggested_owner: dev

waiver: { active: false }

quality_score: 70

evidence:
  tests_reviewed: 0
  risks_identified: 3
  trace:
    ac_covered: [1, 2, 3, 4, 5, 6, 7]
    ac_gaps: [8, 9]

nfr_validation:
  security:
    status: CONCERNS
    notes: 'Crashes on missing env vars instead of graceful degradation.'
  performance:
    status: PASS
    notes: 'Rate limiter/circuit present; needs tests.'
  reliability:
    status: CONCERNS
    notes: 'Missing approval flow and tests reduce operational confidence.'
  maintainability:
    status: CONCERNS
    notes: 'No tests and crash-on-missing-env path make support harder.'

recommendations:
  immediate:
    - action: 'Implement safe disabled mode and approval workflow; add Reddit client/route tests.'
      refs: ['backend/src/platforms/reddit', 'backend/src/api/routes/reddit.ts']
  future:
    - action: 'Finish Story 1.8 approval flow before enabling writes by default.'
      refs: ['docs/stories/1.8.story.md']
