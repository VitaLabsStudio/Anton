# Story 3.2: Message Archetype Templates with Performance Tracking

## Status: Draft

## Story

**As a** content creator,  
**I want** eight distinct message archetypes with multiple variants each, including screenshot-worthy content and comprehensive performance tracking,  
**so that** replies feel human, varied, naturally shareable, and the learning system can optimize archetype selection based on robust statistical analysis.

## Acceptance Criteria

1. Message templates defined at `@backend/data/message-archetypes.json`
2. **Eight archetypes implemented**:
   - **Checklist**: 2-3 actionable steps, zero jargon
   - **Myth-bust**: One misconception corrected gently, non-scolding
   - **Coach**: "If you have 10 minutes: do X; if 30: add Y"
   - **Storylet**: 20-30 word relatable scenario + tip
   - **Humor-light**: Kind, never snarky
   - **Credibility-anchor**: "Here's the simple mechanism..." with testimonials
   - **Confident Recommender**: First-person advocacy
   - **Problem-Solution Direct**: Educational + assertive
3. Each archetype has 8-12 variants for variety
4. **Screenshot-Worthy Design Principles**:
   - Memorable opening hooks
   - Quotable one-liners
   - Visual structure: Line breaks, emojis (1-2 max), numbered lists
   - Shareable wisdom positioning
5. Templates use placeholder syntax: `{{empathy_opener}}`, `{{practical_tip}}`, `{{product_mention}}`
6. Platform-specific versions: short (≤320 chars), full (≤500 chars)
7. Archetype rotation enforced via Story 2.10
8. Template selection considers author archetype
9. **Social Proof Integration**: Dynamic signature with help count
10. Unit tests validate all templates render without placeholder errors
11. **Performance Tracking Integration**: Each reply stores archetype for analytics

---

## Tasks / Subtasks

- [ ] **Task 1: Create Archetype Templates File** (AC: 1, 2)
  - [ ] Create `backend/src/data/message-archetypes.json`
  - [ ] Define structure with archetype objects
  - [ ] Add version and metadata

- [ ] **Task 2: Create Checklist Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] 2-3 actionable steps each
  - [ ] Zero jargon
  - [ ] Example: "Try these in order: 1) Sip water slowly 2) Eat something bland 3) Rest in dark room"

- [ ] **Task 3: Create Myth-bust Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] Gentle correction tone
  - [ ] Non-scolding language
  - [ ] Example: "Actually, greasy food doesn't absorb alcohol (that's a myth). What helps is..."

- [ ] **Task 4: Create Coach Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] Time-based options
  - [ ] Example: "If you have 10 min: hydrate + B-vitamins; If 30 min: add gentle walk"

- [ ] **Task 5: Create Storylet Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] 20-30 word relatable scenarios
  - [ ] Include practical tip
  - [ ] Example: "Your liver is basically a bouncer dealing with way too many guests right now. Give it backup: B-vitamins help..."

- [ ] **Task 6: Create Humor-light Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] Kind, never snarky
  - [ ] Example: "Your future self asked me to send water and vitamins"

- [ ] **Task 7: Create Credibility-anchor Archetype** (AC: 2, 3, 9)
  - [ ] Create 8-12 variants
  - [ ] Educational mechanism explanation
  - [ ] Include testimonial placeholders
  - [ ] Example: "Here's the simple mechanism: alcohol depletes B-vitamins and glutathione..."

- [ ] **Task 8: Create Confident Recommender Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] First-person advocacy
  - [ ] Example: "I keep Vita patches in my bag for exactly this. They're transdermal so..."

- [ ] **Task 9: Create Problem-Solution Direct Archetype** (AC: 2, 3)
  - [ ] Create 8-12 variants
  - [ ] Educational + assertive
  - [ ] Example: "Hangover = dehydration + vitamin depletion. Vita patches deliver both through your skin..."

- [ ] **Task 10: Add Screenshot-Worthy Elements** (AC: 4)
  - [ ] Add memorable hooks to all archetypes
  - [ ] Add quotable one-liners
  - [ ] Structure with line breaks
  - [ ] Add emoji guidelines (1-2 max)

- [ ] **Task 11: Create Platform Variants** (AC: 6)
  - [ ] Short version (≤320 chars) for Twitter/Threads
  - [ ] Full version (≤500 chars) for Reddit
  - [ ] Test character limits

- [ ] **Task 12: Write Unit Tests** (AC: 10)
  - [ ] Test template rendering
  - [ ] Test placeholder replacement
  - [ ] Test character limits
  - [ ] Verify no placeholder errors

---

## Dev Notes

### Message Archetypes Configuration
```json
// backend/src/data/message-archetypes.json
{
  "version": "1.0",
  "archetypes": {
    "CHECKLIST": {
      "name": "Checklist",
      "description": "2-3 actionable steps, zero jargon",
      "modes": ["HELPFUL", "HYBRID"],
      "variants": [
        {
          "id": "checklist_v1",
          "template": "{{empathy_opener}}\n\nTry these in order:\n1. {{step_1}}\n2. {{step_2}}\n3. {{step_3}}\n\n{{product_mention}}\n\n{{signature}}",
          "placeholders": {
            "empathy_opener": ["That sounds rough.", "Been there.", "Rough morning for sure."],
            "step_1": ["Sip water slowly (not chug)", "Eat something bland (toast, banana)"],
            "step_2": ["Take B-vitamins if you have them", "Get some electrolytes"],
            "step_3": ["Rest in a dark room", "Light walk if you can manage"],
            "product_mention": "Vita patches deliver B-vitamins + electrolytes through your skin (easier than pills when nauseous): {{link}}",
            "signature": "—Antone (Vita) | Helped {{help_count}} people this month"
          }
        }
        // ... 7-11 more variants
      ]
    },
    "MYTHBUST": {
      "name": "Myth-bust",
      "description": "Gentle misconception correction",
      "modes": ["HYBRID", "HELPFUL"],
      "variants": [
        {
          "id": "mythbust_v1",
          "template": "{{misconception_intro}}\n\n{{correction}}\n\n{{better_approach}}\n\n{{product_mention}}\n\n{{signature}}",
          "placeholders": {
            "misconception_intro": [
              "Actually, greasy food doesn't absorb alcohol (common myth).",
              "Hair of the dog just delays recovery, unfortunately."
            ],
            "correction": [
              "What helps is replenishing vitamins and hydration.",
              "The real need is B-vitamins and electrolytes."
            ],
            "better_approach": [
              "Focus on: water, B-vitamins, rest.",
              "The science-backed approach: hydration + nutrients + time."
            ],
            "product_mention": "Vita patches deliver these transdermally (no swallowing): {{link}}",
            "signature": "—Antone (Vita)"
          }
        }
        // ... more variants
      ]
    },
    "COACH": {
      "name": "Coach",
      "description": "Time-based progressive options",
      "modes": ["HELPFUL", "HYBRID"],
      "variants": [
        {
          "id": "coach_v1",
          "template": "{{empathy}}\n\nIf you have:\n• 10 min: {{quick_action}}\n• 30 min: {{medium_action}}\n• Full day: {{comprehensive}}\n\n{{product_mention}}\n\n{{signature}}"
        }
        // ... more variants
      ]
    },
    "STORYLET": {
      "name": "Storylet",
      "description": "20-30 word relatable scenario",
      "modes": ["ENGAGEMENT", "HYBRID"],
      "variants": [
        {
          "id": "storylet_v1",
          "template": "{{relatable_scenario}}\n\n{{practical_tip}}\n\n{{optional_product}}\n\n{{signature}}",
          "placeholders": {
            "relatable_scenario": [
              "Your liver is basically a bouncer dealing with way too many guests right now.",
              "Hangovers are just your body sending you an invoice for last night."
            ]
          }
        }
        // ... more variants
      ]
    },
    "HUMOR_LIGHT": {
      "name": "Humor-light",
      "description": "Kind, never snarky",
      "modes": ["ENGAGEMENT", "HYBRID"],
      "variants": [
        {
          "id": "humor_v1",
          "template": "{{kind_humor}}\n\n{{helpful_tip}}\n\n{{signature}}",
          "placeholders": {
            "kind_humor": [
              "Your future self asked me to send water and vitamins.",
              "Past you made some choices. Present you needs hydration."
            ]
          }
        }
      ]
    },
    "CREDIBILITY_ANCHOR": {
      "name": "Credibility-anchor",
      "description": "Educational with testimonials",
      "modes": ["HELPFUL", "HYBRID"],
      "variants": [
        {
          "id": "credibility_v1",
          "template": "{{mechanism_explanation}}\n\n{{scientific_backing}}\n\n{{testimonial}}\n\n{{product_mention}}\n\n{{signature}}"
        }
      ]
    },
    "CONFIDENT_RECOMMENDER": {
      "name": "Confident Recommender",
      "description": "First-person advocacy",
      "modes": ["HELPFUL", "HYBRID"],
      "variants": [
        {
          "id": "confident_v1",
          "template": "{{first_person_advocacy}}\n\n{{benefit_driven}}\n\n{{assertive_cta}}\n\n{{signature}}",
          "placeholders": {
            "first_person_advocacy": [
              "I keep Vita patches in my bag for exactly this.",
              "I've been there—Vita patches are my go-to now."
            ],
            "benefit_driven": [
              "They're transdermal so they work when your stomach can't handle pills.",
              "No swallowing when you're nauseous. They deliver through your skin."
            ],
            "assertive_cta": [
              "Worth trying: {{link}}",
              "Check them out: {{link}}"
            ]
          }
        }
      ]
    },
    "PROBLEM_SOLUTION_DIRECT": {
      "name": "Problem-Solution Direct",
      "description": "Educational + assertive",
      "modes": ["HELPFUL"],
      "variants": [
        {
          "id": "problem_solution_v1",
          "template": "{{problem_statement}}\n\n{{solution_mechanism}}\n\n{{social_proof}}\n\n{{direct_link}}\n\n{{signature}}",
          "placeholders": {
            "problem_statement": [
              "Hangover = dehydration + vitamin depletion.",
              "The issue: alcohol drains B-vitamins and glutathione."
            ],
            "solution_mechanism": [
              "Vita patches deliver both through your skin.",
              "Transdermal delivery bypasses your upset stomach."
            ],
            "social_proof": [
              "Worked for me and 10k+ others.",
              "Used by thousands who can't stomach pills."
            ],
            "direct_link": "Try it: {{link}}"
          }
        }
      ]
    }
  }
}
```

### File Structure
```
backend/src/
└── data/
    └── message-archetypes.json  # THIS STORY
```

---

## Testing

### Test File Location
- `backend/tests/unit/generation/archetype-templates.test.ts`

### Testing Standards
- Test all archetype variants
- Test placeholder replacement
- Test character limits

### Story-Specific Testing Requirements
1. All 8 archetypes have 8-12 variants
2. Templates render without errors
3. Platform variants respect character limits
4. Placeholders replaced correctly
5. Screenshot-worthy elements present

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-01 | 1.0 | Initial story draft | Bob (SM Agent) |

---

## Dev Agent Record
*To be filled by Dev Agent*

---

## QA Results
*To be filled by QA Agent*










