# Story 1.9: Reddit Community Building (r/VitaWellness) - Content & Process

## Status: Ready for Review

## Story

**As** the system,  
**I want** to establish the foundation for r/VitaWellness using a manual, human-centric approach,  
**so that** we build a genuine community without risking a "spammer" reputation through automation.

## Acceptance Criteria

1. **Subreddit Setup**:
   - r/VitaWellness created via script (one-time) or manually.
   - Description, Rules, and Sidebar configured.
2. **Content Library**:
   - JSON/Markdown library of 10 "Evergreen" educational posts created.
   - Topics: Hangover Science, Hydration, Supplements.
   - **NO** automation code for posting.
3. **Manual Process Definition**:
   - "Content Calendar" document created.
   - "Manual Karma Building" guide created.
   - "Moderator Outreach" protocols defined (Human-only).
4. **Metrics**:
   - Strategy relies on Native Reddit Moderator Tools (no custom dashboard).

## Tasks / Subtasks

- [x] **Task 1: Create Content Library (Data Only)** (AC: 2)
  - [x] Create `backend/src/data/content-library.json`.
  - [x] **Draft 10 Educational Posts (Title, Body, Sources)**:
    - [x] Post 1: "The Science of Hangovers: What Really Happens to Your Body"
    - [x] Post 2: "Transdermal vs Oral Supplements: Absorption Science Explained"
    - [x] Post 3: "Hydration Myths Debunked: What Actually Helps"
    - [x] Post 4: "NAD+ Depletion: Why Hangovers Get Worse With Age"
    - [x] Post 5: "Prevention Strategies: Evidence-Based Pre-Drinking Tips"
    - [x] Post 6: "Vitamin Cofactors: The Science of Alcohol Metabolism"
    - [x] Post 7: "B-Vitamins and Hangovers: What the Research Says"
    - [x] Post 8: "Electrolyte Balance: More Than Just Water"
    - [x] Post 9: "Recovery Timeline: Hour-by-Hour What Your Body Does"
    - [x] Post 10: "Common Hangover Cures: Fact vs Fiction"
  - [x] Ensure all posts cite sources and avoid overt product selling.

- [x] **Task 2: Create Subreddit Setup Script** (AC: 1)
  - [x] Create `scripts/setup-subreddit.ts`.
  - [x] Use Reddit API to create sub, set rules, set styles (One-time execution).
  - [x] Define Subreddit Rules (No Spam, Be Respectful, Science-Backed, No Med Advice).

- [x] **Task 3: Define Manual Processes** (AC: 3)
  - [x] Create `docs/manuals/community-strategy.md`.
  - [x] **Section: Weekly Content Calendar**: Define schedule for posting the 10 library items (Human posts 1x/week).
  - [x] **Section: Engagement Protocol**: 80% external subreddits / 20% internal.
  - [x] **Section: Moderator Outreach**: Protocol for human-only outreach after 8 weeks.

- [x] **Task 4: Establish Baseline Metrics** (AC: 4)
  - [x] Document which Native Reddit stats to track (Uniques, Pageviews, Members).
  - [x] Create a simple tracking sheet (Google Sheets template) link in docs.

---

## Dev Notes

### Risk Mitigation Strategies - **PRIMARY DIRECTIVE #4: DRASTICALLY SIMPLIFY**
[Source: QA Risk Assessment 1.9-risk-20251202.md]

**CRITICAL STRATEGIC PIVOT**: All automation has been removed to prevent **BUS-001 (Spammer Reputation)**.

**REMOVED**:
- ❌ `RedditContentPoster` Service
- ❌ `CommunityMetrics` Service
- ❌ `AMAScheduler` Service
- ❌ Custom Dashboard

**NEW STRATEGY**:
- **Manual First**: Humans post content. Humans reply.
- **Native Tools**: Use Reddit's built-in analytics.
- **Safety**: Zero risk of "bot behavior" bans.

### Content Library Structure
```json
{
  "posts": [
    {
      "id": "science-hangover-1",
      "title": "The Science of Hangovers",
      "body": "...",
      "status": "ready"
    }
  ]
}
```

### Manual Strategy
1. **Phase 1 (Weeks 1-4)**: Setup & Seed. Post 3-4 articles manually from the Library.
2. **Phase 2 (Weeks 5-12)**: Engage elsewhere. Reply to comments.
3. **Phase 3**: Evaluate.

---

## QA Results

### Review Date: 2025-12-02

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

This story is primarily about process and content, not complex code. The "CRITICAL STRATEGIC PIVOT" to a manual-first approach is an excellent quality decision. It completely mitigates the primary business risk (BUS-001) of being banned for spam or bot-like behavior. This is a model of a mature, risk-aware strategy.

### Refactoring Performed

None. The story itself represents a refactoring of the *strategy*, removing all previously considered automation.

### Compliance Check

- Coding Standards: ✓ (Applicable to the one-off script)
- Project Structure: ✓ (Prescribed in story)
- Testing Strategy: N/A
- All ACs Met: ✗ (Not implemented)

### Improvements Checklist

- [ ] Write the 10 educational posts for the content library (Task 1).
- [ ] Create the one-time subreddit setup script (Task 2).
- [ ] Write the `community-strategy.md` document detailing the manual processes (Task 3).

### Security Review

The security risk is low. By removing automation, the attack surface is dramatically reduced. The only technical component is a one-time script using credentials that should be handled securely.

### Performance Considerations

Not applicable. This story involves no long-running processes.

### Files Modified During Review

None.

### Gate Status

Gate: PASS → `docs/qa/gates/1.9-reddit-community-building.yml`
Risk profile: `docs/qa/assessments/1.9-risk-20251202.md`
NFR assessment: Not applicable for this story.

### Recommended Status

✓ **Ready for Implementation** - The story is well-defined, low-risk, and ready to be worked on.
*To be filled by QA Agent*

### Review Date: 2025-12-04

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Implementation satisfies the manual-first pivot: the content library ships 10 sourced, non-promotional posts; the setup script defaults to dry-run and configures name/description/sidebar/rules/stylesheet; the community playbook defines cadence, 80/20 engagement, mod outreach after week 8, and native-metrics tracking with a CSV/Sheets template. No automation or posting bots are present. Existing lint issues are confined to unrelated legacy test/platform files.

### Refactoring Performed

None. Review only.

### Compliance Check

- Coding Standards: ✓ Script is typed, validates env, and ships in dry-run by default.
- Project Structure: ✓ Files placed per story tasks (data, scripts, docs/manuals, tracking template).
- Testing Strategy: N/A (one-time setup script + docs; no runnable product code).
- All ACs Met: ✓ AC1-4 satisfied.

### Improvements Checklist

- [ ] Add a short README snippet in `scripts/setup-subreddit.ts` header with example env exports for quick use.
- [ ] Run `pnpm lint` once upstream import-order/return-type issues in legacy backend tests are fixed to regain a green baseline.

### Security Review

Low risk. Credentials are pulled from env vars; dry-run is on by default, and the script performs no persistent actions unless explicitly enabled.

### Performance Considerations

Not applicable (one-time script and documentation only).

### Files Modified During Review

None.

### Gate Status

Gate: PASS → `docs/qa/gates/1.9-reddit-community-building.yml`
Risk profile: `docs/qa/assessments/1.9-risk-20251202.md`
NFR assessment: Not created (manual/docs-only story).

### Recommended Status

✓ Ready for Done (pending repo-wide lint fix outside this story).

### Review Date: 2025-12-04 (Re-review)

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Verified the added usage header in `scripts/setup-subreddit.ts`; it clearly documents env exports and dry-run/live commands while keeping manual-only scope. All prior deliverables remain intact; AC1-4 stay satisfied. Note: ensure the refresh token export uses the raw token value expected by Snoowrap (no extra `refresh_token=` prefix unless that is part of the actual token).

### Refactoring Performed

None. Review only.

### Compliance Check

- Coding Standards: ✓ Header is concise, ASCII, and correct for env/run usage.
- Project Structure: ✓ No changes beyond documented script header.
- Testing Strategy: N/A (one-time script + docs).
- All ACs Met: ✓

### Improvements Checklist

- [x] Add a short README-style usage header in `scripts/setup-subreddit.ts` with env and run examples.
- [ ] Run `pnpm lint` once legacy backend test/platform lint issues are fixed to confirm a green baseline.
- [ ] (Optional) Clarify in the header that `REDDIT_REFRESH_TOKEN` should be the raw token string (omit any duplicate `refresh_token=` prefix if not present in the token value).

### Security Review

No change: credentials remain env-scoped; dry-run default still protects against unintended writes.

### Performance Considerations

Not applicable.

### Files Modified During Review

None.

### Gate Status

Gate: PASS → `docs/qa/gates/1.9-reddit-community-building.yml`
Risk profile: `docs/qa/assessments/1.9-risk-20251202.md`
NFR assessment: Not created (manual/docs-only story).

### Recommended Status

✓ Ready for Done (pending repo-wide lint fix outside this story).

---

## Dev Agent Record

### Agent Model Used
GPT-4o (via James - Full Stack Developer)

### Debug Log References
- `pnpm lint` (still failing due to legacy import-order/return-type issues outside this story scope; new Story 1.9 files unaffected).

### Completion Notes
- Authored a 10-post evergreen content library with sourced, non-promotional educational bodies covering hangover science, hydration, and supplement literacy (`backend/src/data/content-library.json`).
- Added one-time subreddit setup script with dry-run safety, subreddit creation/configuration, rule seeding, and minimal stylesheet support (`scripts/setup-subreddit.ts`).
- Added concise usage header to the subreddit setup script with env and run examples.
- Documented the manual community playbook with 10-week calendar, 80/20 engagement protocol, and moderator outreach steps (`docs/manuals/community-strategy.md`).
- Delivered metrics plan plus tracking assets, including Google Sheets copy link and CSV template to log members, uniques, pageviews, and engagement mix (`docs/manuals/reddit-tracking-template.csv`).

### File List

#### New Files
- `backend/src/data/content-library.json`
- `scripts/setup-subreddit.ts`
- `docs/manuals/community-strategy.md`
- `docs/manuals/reddit-tracking-template.csv`

#### Modified Files
- `docs/stories/1.9.story.md`

### Change Log
- Created sourced evergreen content library for manual posting.
- Built subreddit setup script with environment validation, dry-run guardrails, usage header, and initial styling/rule seeding.
- Authored community strategy manual with calendar, engagement split, moderator outreach, and metrics guidance plus CSV template.
- Updated story status and task checkboxes; lint currently blocked by unrelated repository import/order issues.
